> æœ¬æ–‡ä¸º [https://www.itrade.icu](https://www.itrade.icu) é‡åŒ–äº¤æ˜“å®éªŒå®¤å‡ºå“ã€‚è®¿é—®è·å–æ›´å¤šç¦åˆ©

è®¿é—®è·å–æ›´å¤šç¦åˆ©



# ğŸ“˜ ç¬¬ 4 ç¯‡ï¼šã€Šç­–ç•¥æ€ä¹ˆæµ‹è¯•æ‰é è°±ï¼ŸFreqtrade å›æµ‹å‘½ä»¤ backtesting å…¨æ”»ç•¥ã€‹

å›æµ‹ï¼ˆBacktestingï¼‰æ˜¯ç­–ç•¥å¼€å‘ä¸­**æœ€æ ¸å¿ƒçš„ç¯èŠ‚**ä¹‹ä¸€ã€‚  
é€šè¿‡æ¨¡æ‹Ÿå†å²è¡Œæƒ…è¿è¡Œç­–ç•¥ï¼Œå¯ä»¥æœ‰æ•ˆè¯„ä¼°å…¶è¡¨ç°ï¼Œå¸®åŠ©ä½ åˆ¤æ–­æ˜¯å¦å€¼å¾—ä¸Šçº¿å®ç›˜ã€‚

æœ¬æ–‡å°†è¯¦è§£ Freqtrade çš„ `backtesting` å‘½ä»¤ï¼ŒåŒ…æ‹¬å¯åŠ¨æ–¹å¼ã€å¸¸è§å‚æ•°ã€æ•°æ®å¤„ç†ã€ç»“æœåˆ†æã€å¤šè¿›ç¨‹åŠ é€Ÿã€Docker ä½¿ç”¨æ–¹å¼ç­‰ã€‚

---

## ğŸ” ä¸€ã€ä»€ä¹ˆæ˜¯å›æµ‹ï¼Ÿä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ

å›æµ‹æ˜¯ä¸€ç§å°†ä½ çš„ç­–ç•¥åœ¨**å†å²æ•°æ®ä¸Šè¿›è¡Œâ€œå‡è®¾äº¤æ˜“â€**çš„è¿‡ç¨‹ï¼Œç›®æ ‡æ˜¯äº†è§£ç­–ç•¥åœ¨è¿‡å»å¸‚åœºä¸­çš„è¡¨ç°ã€‚

ä¼˜è´¨çš„ç­–ç•¥å›æµ‹å¯ä»¥å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š

- ç›ˆäºæ¯”æ˜¯å¦åˆç†ï¼Ÿ
- èƒœç‡æ˜¯å¦è¶³å¤Ÿç¨³å®šï¼Ÿ
- æ˜¯å¦è¿‡æ‹Ÿåˆï¼Ÿï¼ˆæœªæ¥å¯èƒ½å¤±æ•ˆï¼‰
- å“ªäº›å‚æ•°å½±å“æ”¶ç›Šæœ€æ˜¾è‘—ï¼Ÿ

---

## ğŸš€ äºŒã€åŸºæœ¬å›æµ‹å‘½ä»¤ç»“æ„

```bash
freqtrade backtesting \
  --config user_data/config.json \
  --strategy MyStrategy \
  --timeframe 15m \
  --timerange 20220101-20230701
```
## å‚æ•°è¯¦è§£ï¼š
| å‚æ•°            | å«ä¹‰                           |
| ------------- | ---------------------------- |
| `--config`    | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå«äº¤æ˜“å¯¹ã€æ—¶é—´å‘¨æœŸç­‰ï¼‰         |
| `--strategy`  | ä½¿ç”¨çš„ç­–ç•¥ç±»å                      |
| `--timeframe` | æ—¶é—´å‘¨æœŸï¼Œå¦‚ 15mã€1h                |
| `--timerange` | å›æµ‹æ—¶é—´æ®µï¼ˆæ ¼å¼ä¸º YYYYMMDD-YYYYMMDDï¼‰ |
å¯é€‰å‚æ•°ï¼š
| å‚æ•°             | å«ä¹‰                 |
| -------------- | ------------------ |
| `--export`     | å¯¼å‡ºè¯¦ç»†äº¤æ˜“æ•°æ® CSV       |
| `--stats-file` | è¾“å‡ºç»“æœç»Ÿè®¡æ–‡ä»¶ JSON      |
| `--processes`  | å¯åŠ¨å¤šä¸ªè¿›ç¨‹è¿›è¡Œå¹¶è¡Œå›æµ‹ï¼ˆæå‡æ€§èƒ½ï¼‰ |


## ğŸ’¡ ä¸‰ã€å›æµ‹å‰å‡†å¤‡äº‹é¡¹
å›æµ‹ä¸æ˜¯ç›´æ¥è·‘å‘½ä»¤è¿™ä¹ˆç®€å•ï¼Œå»ºè®®ä½ ç¡®ä¿ä»¥ä¸‹äº‹é¡¹ï¼š

1. âœ… å·²ä¸‹è½½å¯¹åº”å‘¨æœŸçš„å†å²æ•°æ®ï¼š
```bash 
freqtrade download-data --timeframes 15m --timerange 20220101-20230701
```
2. âœ… ç­–ç•¥æ–‡ä»¶å·²æ”¾ç½®åœ¨ user_data/strategies/ ç›®å½•ï¼Œç±»åæ­£ç¡®ã€‚
3. âœ… config.json è®¾ç½®æ— è¯¯ï¼ŒåŒ…æ‹¬ï¼š
- pair äº¤æ˜“å¯¹æ­£ç¡®
- exchange è®¾ç½®æ­£ç¡®
- stake_currency è®¾ä¸º USDTã€BTC ç­‰

## ğŸ§ª å››ã€å›æµ‹ç»“æœè¾“å‡ºè¯´æ˜
å›æµ‹å®Œæˆåï¼ŒFreqtrade ä¼šè¾“å‡ºåŒ…æ‹¬ä»¥ä¸‹ä¿¡æ¯çš„æ—¥å¿—ï¼š

| é¡¹ç›®                   | å«ä¹‰            |
| -------------------- | ------------- |
| `Total profit`       | ç­–ç•¥æœ€ç»ˆæ€»æ”¶ç›Šï¼ˆå‡€å€¼ï¼‰   |
| `Total trades`       | å›æµ‹æœŸé—´æ€»äº¤æ˜“æ¬¡æ•°     |
| `Win / loss ratio`   | èƒœç‡ï¼ˆç›ˆäºç¬”æ•°æ¯”ï¼‰     |
| `Sharpe Ratio`       | é£é™©è°ƒæ•´åçš„æ”¶ç›Š      |
| `Avg trade duration` | å¹³å‡æŒä»“æ—¶é—´        |
| `Drawdown`           | æœ€å¤§å›æ’¤          |
| `Profit factor`      | ç›ˆåˆ©å› å­ï¼ˆæ”¶ç›Š / æŸå¤±ï¼‰ |

## ğŸ–¼ï¸ äº”ã€å›¾è¡¨å›æµ‹å±•ç¤ºï¼ˆbacktesting-showï¼‰
Freqtrade æä¾›äº†å›¾å½¢åŒ–å·¥å…· backtesting-show æŸ¥çœ‹ä¹°å–ç‚¹ã€ç­–ç•¥è¡Œä¸ºï¼š
```bash
freqtrade backtesting-show \
  --config user_data/config.json
```
ğŸ“æ˜¾ç¤ºç­–ç•¥çš„æ”¶ç›Šæ›²çº¿ã€äº¤æ˜“ç‚¹æ ‡è®°ã€ä»“ä½ç­‰ä¿¡æ¯ã€‚

## ğŸ§© å…­ã€å¸¸è§å›æµ‹é—®é¢˜å¤„ç†
| é—®é¢˜                 | å¯èƒ½åŸå›                            |
| ------------------ | ------------------------------ |
| å›æµ‹æ— äº¤æ˜“              | ç­–ç•¥ä¿¡å·æ¡ä»¶å¤ªè‹›åˆ»ï¼Œæˆ–æ•°æ®ç¼ºå¤±                |
| Data not available | æ•°æ®æœªä¸‹è½½æˆ– timerange è¦†ç›–ä¸åˆ°          |
| Indicators is NaN  | æŒ‡æ ‡å‚æ•°è®¾ç½®é”™è¯¯ / ä¸é€‚ç”¨äºå½“å‰ timeframe    |
| Overfitting æ€€ç–‘     | å›æµ‹æ”¶ç›Šæé«˜ä½†å®ç›˜äºæŸï¼Œå¯ç”¨ forward test éªŒè¯ |


## ğŸ§  ä¸ƒã€å¤šè¿›ç¨‹åŠ é€Ÿå›æµ‹ï¼ˆ--processesï¼‰
å½“ä½ ä½¿ç”¨å¤šå¯¹å¸ç§æˆ–å¤æ‚ç­–ç•¥æ—¶ï¼Œå¯é€šè¿‡ --processes å‚æ•°æå‡å›æµ‹æ•ˆç‡ï¼š

```bash
freqtrade backtesting \
  --config user_data/config.json \
  --strategy MyStrategy \
  --processes 4
```
ğŸ§ª ä¸€èˆ¬è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°çš„ä¸€åŠåˆ°å…¨éƒ¨ã€‚ä¾‹å¦‚ 8 æ ¸ç”µè„‘è®¾ç½® 4ï½8 éƒ½å¯ã€‚

## ğŸ³ å…«ã€Docker ç¯å¢ƒä¸­å›æµ‹å‘½ä»¤
å¦‚æœä½ ä½¿ç”¨ Docker è¿è¡Œ Freqtradeï¼š
```bash 
docker compose run --rm freqtrade backtesting \
  --config /quants/freqtrade/user_data/config.json \
  --strategy MyStrategy \
  --timeframe 15m \
  --timerange 20220101-20230701
```
ç¡®ä¿ä½ å·²æŒ‚è½½ `user_data/` åˆ°å®¹å™¨å†… `/quants/freqtrade/user_data/`ã€‚
## ğŸ“Š ä¹ã€å¯¼å‡ºå›æµ‹ç»“æœ
è‹¥ä½ å¸Œæœ›ä¿å­˜æ¯ç¬”äº¤æ˜“è¯¦æƒ…ï¼Œå¯æ·»åŠ ï¼š
```bash
--export user_data/backtest_result.csv
```
ä¹Ÿå¯å°†ç­–ç•¥è¡¨ç°ç»“æœå¯¼å‡ºä¸º JSONï¼š

```bash
--stats-file user_data/backtest_stats.json
```
## âœ… åã€å»ºè®®åˆ†æç»´åº¦
å»ºè®®å›æµ‹å®Œé‡ç‚¹å…³æ³¨è¿™äº›æŒ‡æ ‡ï¼š
- ç´¯è®¡æ”¶ç›Šï¼ˆTotal profitï¼‰ï¼šæ ¸å¿ƒæŒ‡æ ‡
- æœ€å¤§å›æ’¤ï¼ˆDrawdownï¼‰ï¼šé£é™©æš´éœ²
- èƒœç‡ / ç›ˆäºæ¯”ï¼šç¨³å®šæ€§è¯„ä¼°
- æ¯ç¬”å¹³å‡æ”¶ç›Šï¼šç­–ç•¥æ¯æ¬¡äº¤æ˜“ä»·å€¼
- ç›ˆåˆ©å› å­ï¼šæ˜¯å¦å€¼å¾—äº¤æ˜“
å¹¶ç»“åˆå›¾è¡¨å·¥å…·åˆ†æï¼š
```bash
freqtrade plot-dataframe --config user_data/config.json --strategy MyStrategy --timerange 20220101-20230101
```

## ğŸ“Œ æ€»ç»“
Freqtrade å›æµ‹ç³»ç»Ÿå¼ºå¤§çµæ´»ï¼Œé€‚åˆæ„å»ºå®Œæ•´çš„ç­–ç•¥ç ”ç©¶ä¸éªŒè¯æµç¨‹ã€‚
| æ­¥éª¤     | å·¥å…·                                    |
| ------ | ------------------------------------- |
| ä¸‹è½½å†å²æ•°æ® | `download-data`                       |
| ç¼–å†™ç­–ç•¥ç±»  | `new-strategy`                        |
| å›æµ‹è¿è¡Œ   | `backtesting`                         |
| å›¾å½¢åŒ–å±•ç¤º  | `backtesting-show` / `plot-dataframe` |
| æ€§èƒ½åŠ é€Ÿ   | `--processes` å¤šè¿›ç¨‹æ”¯æŒ                   |
| å®¹å™¨åŒ–ä½¿ç”¨  | Docker è¿è¡Œå‘½ä»¤                           |





