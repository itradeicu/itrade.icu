> æœ¬æ–‡ä¸º [https://www.itrade.icu](https://www.itrade.icu) é‡åŒ–äº¤æ˜“å®éªŒå®¤å‡ºå“ã€‚è®¿é—®è·å–æ›´å¤šç¦åˆ©

è®¿é—®è·å–æ›´å¤šç¦åˆ©



# ğŸ“˜ çˆ†èµšåˆ©å™¨ï¼ä¸‰æ­¥æå®š Freqtrade æ ¸å¿ƒä¹°å–ä¿¡å·ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å†™è‡ªåŠ¨äº¤æ˜“ç­–ç•¥ï¼

åœ¨ Freqtrade ç­–ç•¥æ¡†æ¶ä¸­ï¼Œ`populate_indicators`ã€`populate_entry_trend` å’Œ `populate_exit_trend` æ˜¯ä¸‰ä¸ªæœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„å‡½æ•°ã€‚å®ƒä»¬åˆ†åˆ«è´Ÿè´£ï¼š

- âœï¸ è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼ˆå¦‚ RSIã€MACDã€å‡çº¿ç­‰ï¼‰
- ğŸ“ˆ åˆ¤æ–­ä¹°å…¥æ—¶æœº
- ğŸ“‰ åˆ¤æ–­å–å‡ºæ—¶æœº

æœ¬ç¯‡æ–‡ç« å°†ä¸ºä½ è¯¦ç»†è®²è§£è¿™ä¸‰ä¸ªå‡½æ•°çš„ä½œç”¨ã€ä½¿ç”¨æ–¹å¼ã€ä»£ç ç¤ºä¾‹ä»¥åŠæ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©ä½ ä»é›¶æ­å»ºè‡ªå·±çš„é‡åŒ–äº¤æ˜“ç­–ç•¥ã€‚

---

## 1ï¸âƒ£ `populate_indicators`: è®¡ç®—æŠ€æœ¯æŒ‡æ ‡çš„æ ¸å¿ƒå‡½æ•°

### âœ… åŠŸèƒ½ä»‹ç»

è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼šå¯¹æ•°æ®å¸§ï¼ˆDataFrameï¼‰è®¡ç®—å¹¶å¡«å……æŠ€æœ¯æŒ‡æ ‡ï¼Œç”¨äºåç»­åˆ¤æ–­ä¹°å–ä¿¡å·ã€‚

å®ƒçš„è¾“å…¥æ˜¯å†å²Kçº¿æ•°æ®ï¼Œè¾“å‡ºæ˜¯æ–°å¢äº†ä¸€äº›æŒ‡æ ‡åˆ—çš„æ•°æ®å¸§ã€‚é€šå¸¸ä½ ä¼šåœ¨è¿™é‡Œå¼•å…¥å¦‚ RSIã€MACDã€SMAã€EMA ç­‰ã€‚

### ğŸ§  å›æµ‹ vs å®ç›˜

- **å›æµ‹æ¨¡å¼**ï¼š`populate_indicators` ä¼šå¯¹æ•´ä¸ªå†å²æ•°æ®è°ƒç”¨ä¸€æ¬¡ã€‚
- **å®ç›˜æ¨¡å¼**ï¼šæ¯ç”Ÿæˆä¸€ä¸ªæ–°Kçº¿ï¼ˆå¦‚æ¯åˆ†é’Ÿã€æ¯å°æ—¶ï¼‰å°±ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚

å› æ­¤åœ¨å®ç›˜æ—¶ï¼Œä½ å¯ä»¥åœ¨è¯¥å‡½æ•°ä¸­åŠ å…¥**å®æ—¶åˆ¤æ–­ä¸å¤„ç†é€»è¾‘**ï¼Œè€Œåœ¨å›æµ‹ä¸­éœ€è¦ç”¨ `for row in dataframe.iterrows()` éå†å†å²æ•°æ®ã€‚

### ğŸ’¡ ç¤ºä¾‹ä»£ç 

```python
def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
    # è®¡ç®—14æ—¥ RSI æŒ‡æ ‡
    dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)

    # å¦‚æœä½ æƒ³åœ¨å›æµ‹æ—¶å¤„ç†æ¯æ ¹Kçº¿
    for index, row in dataframe.iterrows():
        if row['rsi'] < 30:
            # è®°å½•æ—¥å¿—ã€æ‰“æ ‡ç­¾ç­‰æ“ä½œ
            pass

    return dataframe
```

---

## 2ï¸âƒ£ `populate_entry_trend`: ä¹°å…¥ä¿¡å·é€»è¾‘

### âœ… åŠŸèƒ½ä»‹ç»

`populate_entry_trend` æ˜¯å®šä¹‰ä½•æ—¶ä¹°å…¥ï¼ˆå¼€ä»“ï¼‰çš„åœ°æ–¹ã€‚å®ƒä¼šåœ¨æ•°æ®å¸§ä¸­ç”Ÿæˆä¸€ä¸ª `buy` åˆ—ï¼ŒFreqtrade ä¼šæ£€æŸ¥è¿™ä¸€åˆ—çš„å€¼ï¼š

- `buy = 1` è¡¨ç¤ºå½“å‰Kçº¿åº”ä¹°å…¥
- `buy = 0`ï¼ˆé»˜è®¤ï¼‰è¡¨ç¤ºä¸æ“ä½œ

Freqtrade ä¼šåœ¨æ»¡è¶³è¯¥æ¡ä»¶çš„æ—¶åˆ»ï¼Œç”¨**å¸‚ä»·å•æˆ–é™ä»·å•**å‘èµ·äº¤æ˜“ã€‚

### ğŸ›  æŠ€æœ¯ç”¨æ³•

ä½ å¯ä»¥ä½¿ç”¨ `.loc` å¯¹ dataframe åšå¸ƒå°”ç­›é€‰å¹¶è®¾ç½®ä¹°å…¥ä¿¡å·ï¼š

```python
dataframe.loc[æ¡ä»¶è¡¨è¾¾å¼, 'buy'] = 1
```

### ğŸ’¡ ç¤ºä¾‹ä»£ç 

```python
def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
    dataframe['buy'] = 0  # åˆå§‹åŒ–æ‰€æœ‰Kçº¿ä¸ºä¸ä¹°å…¥

    # RSI å°äº 30 æ—¶ï¼Œè®¾ç½®ä¸ºä¹°å…¥ä¿¡å·
    dataframe.loc[dataframe['rsi'] < 30, 'buy'] = 1

    return dataframe
```

### ğŸ“Œ å®ç”¨å»ºè®®

- å¤šé‡æ¡ä»¶ç»„åˆï¼šå¯ä½¿ç”¨ `(cond1) & (cond2)` ç­‰æ–¹å¼ç»„åˆå¤šä¸ªæŠ€æœ¯æŒ‡æ ‡ã€‚
- ä¹Ÿå¯ä»¥ä½¿ç”¨å¸ƒæ—å¸¦ã€MA ç­‰å…¶ä»–æŠ€æœ¯æŒ‡æ ‡æ¥å¢å¼ºä¹°ç‚¹åˆ¤æ–­ã€‚

---

## 3ï¸âƒ£ `populate_exit_trend`: å–å‡ºä¿¡å·é€»è¾‘

### âœ… åŠŸèƒ½ä»‹ç»

`populate_exit_trend` æ˜¯ä½ å®šä¹‰**ä½•æ—¶å¹³ä»“**ï¼ˆå–å‡ºï¼‰çš„å‡½æ•°ï¼Œæ“ä½œé€»è¾‘ä¸ä¹°å…¥ç±»ä¼¼ï¼Œåªæ˜¯è®¾ç½®çš„æ˜¯ `sell` åˆ—ï¼š

- `sell = 1` è¡¨ç¤ºè¯¥Kçº¿è§¦å‘å¹³ä»“
- `sell = 0` è¡¨ç¤ºä¸å–å‡º

Freqtrade ä¼šåœ¨æ£€æµ‹åˆ° `sell=1` æ—¶ï¼ŒæŒ‰è®¾ç½®å‘å‡ºå–å‡ºæŒ‡ä»¤ã€‚

### ğŸ’¡ ç¤ºä¾‹ä»£ç 

```python
def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
    dataframe['sell'] = 0  # åˆå§‹åŒ–ä¸ºä¸å–å‡º

    # RSI é«˜äº 70 æ—¶è®¾ç½®ä¸ºå–å‡ºä¿¡å·
    dataframe.loc[dataframe['rsi'] > 70, 'sell'] = 1

    return dataframe
```

### ğŸ§  å°æŠ€å·§

- ä½ ä¹Ÿå¯ä»¥åŠ å…¥æˆäº¤é‡ã€ä»·æ ¼å½¢æ€ç­‰é€»è¾‘æ¥æé«˜å–ç‚¹å‡†ç¡®æ€§ã€‚
- é…åˆç­–ç•¥ä¸­çš„ ROI æˆ– trailing stop å¯å½¢æˆæ›´å®Œæ•´çš„å‡ºåœºæœºåˆ¶ã€‚

---

## ğŸ§© å®æˆ˜æ¡ˆä¾‹ï¼šæœ€å°å¯è¿è¡Œç­–ç•¥ - RSI ç­–ç•¥

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç­–ç•¥ç±»ï¼Œç»“åˆä¸Šè¿°ä¸‰ä¸ªå‡½æ•°ã€‚ç­–ç•¥é€»è¾‘å¦‚ä¸‹ï¼š

- å½“ RSI < 30ï¼šè®¤ä¸ºå¸‚åœºè¶…å–ï¼Œå‘å‡ºä¹°å…¥ä¿¡å·
- å½“ RSI > 70ï¼šè®¤ä¸ºå¸‚åœºè¶…ä¹°ï¼Œå‘å‡ºå–å‡ºä¿¡å·

```python
from freqtrade.strategy import IStrategy
from pandas import DataFrame
import talib.abstract as ta

class RsiExampleStrategy(IStrategy):
    # ä½¿ç”¨çš„Kçº¿å‘¨æœŸ
    timeframe = '5m'

    # æ¯æ¬¡ä¸‹å•é‡‘é¢ï¼ˆå¯è¦†ç›–é…ç½®æ–‡ä»¶è®¾ç½®ï¼‰
    stake_amount = 100

    # æœ€å°ç›ˆåˆ©ç›®æ ‡å’Œæ­¢æŸ
    minimal_roi = {"0": 0.1}
    stoploss = -0.2

    # ä½¿ç”¨è‡ªå®šä¹‰çš„ä¹°å…¥/å–å‡ºä¿¡å·
    use_exit_signal = True

    def populate_indicators(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
        # è®¡ç®—14æ—¥ RSI æŒ‡æ ‡
        dataframe['rsi'] = ta.RSI(dataframe, timeperiod=14)
        return dataframe

    def populate_entry_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
        dataframe['buy'] = 0
        # RSI å°äº30ï¼Œè¡¨ç¤ºå¸‚åœºè¶…å–ï¼Œä¹°å…¥ä¿¡å·
        dataframe.loc[
            (dataframe['rsi'] < 30),
            'buy'
        ] = 1
        return dataframe

    def populate_exit_trend(self, dataframe: DataFrame, metadata: dict) -> DataFrame:
        dataframe['sell'] = 0
        # RSI å¤§äº70ï¼Œè¡¨ç¤ºå¸‚åœºè¶…ä¹°ï¼Œå–å‡ºä¿¡å·
        dataframe.loc[
            (dataframe['rsi'] > 70),
            'sell'
        ] = 1
        return dataframe
```

## ğŸ§¾ æ€»ç»“

| å‡½æ•°å | ä½œç”¨ | è¿”å›å€¼ |
| ----- | ---- | ------ |
| `populate_indicators` | è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ | å«æœ‰æ–°æŒ‡æ ‡çš„æ•°æ®å¸§ |
| `populate_entry_trend` | è®¾ç½®ä¹°å…¥ä¿¡å· | å«æœ‰ `buy=1` çš„æ•°æ®å¸§ |
| `populate_exit_trend` | è®¾ç½®å–å‡ºä¿¡å· | å«æœ‰ `sell=1` çš„æ•°æ®å¸§ |

è¿™äº›å‡½æ•°æ˜¯ç­–ç•¥è¿è¡Œçš„â€œä¸‰é©¾é©¬è½¦â€ï¼Œä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šä¸æ–­ä¼˜åŒ–ä¸å åŠ é€»è¾‘ï¼Œæ„å»ºè‡ªå·±çš„äº¤æ˜“ç³»ç»Ÿã€‚

---



ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†è¿›å…¥è¿›é˜¶ä¸»é¢˜ï¼Œè®²è§£ `custom_exit` å’Œ `custom_exit_price` çš„åŒºåˆ«ä¸é…åˆä½¿ç”¨ï¼Œæ¬¢è¿å…³æ³¨ç³»åˆ—æ›´æ–°ã€‚

> å¦‚æœä½ å–œæ¬¢è¿™ç±»å†…å®¹ï¼Œæ¬¢è¿ç‚¹èµã€è½¬å‘ã€æ”¶è—ï¼âš¡ï¸

